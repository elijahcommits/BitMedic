---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
---
<Layout title="BitMedic Helps!">
  <main class="desktop-area">
    <div class="desktop-icons-container">
      <a href="/about/" class="desktop-icon"><img src="/icons/about_icon.svg" alt="About BitMedic" /><span>About</span></a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSe87Vmx4OSsn1eQ8zh0XDLioe3Q-O6dLpIm2Ov_m60BSitE7A/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="desktop-icon"><img src="/icons/contact_icon.svg" alt="Contact BitMedic" /><span>Contact</span></a>
      <a href="https://docs.google.com/document/d/1CuhgR8WH7JFDy9haHn_TM6TTR5rR2eo5R5MSCTVZ9Zc/edit?usp=sharing" class="desktop-icon"><img src="/icons/tech_icon.svg" alt="Recommended Tech" /><span>Recommended<br />Tech</span></a>
      <a href="https://www.facebook.com/profile.php?id=61575781265018" class="desktop-icon"><img src="/icons/facebook_icon.svg" alt="our Facebook page" /><span>facebook</span></a>
      <a href="https://x.com/bitmedicio" class="desktop-icon"><img src="/icons/x_twitter_icon.svg" alt="our X/twitter page" /><span>X.com</span></a>
      <a href="https://nextdoor.com/pages/bitmedic-portland-or/" class="desktop-icon"><img src="/icons/nextdoor_icon.svg" alt="our page on Nextdoor" /><span>nextdoor</span></a>
      <!-- <a href="/merch/" class="desktop-icon"><img src="/icons/merch_icon.svg" alt="BitMedic Merch" /><span>Merch</span></a> -->

      {/* UPDATED: Added id="recycle-bin-icon" to this div */}
      <div id="recycle-bin-icon" class="desktop-icon" aria-label="Trigger BSOD"><img src="/icons/recycle_bin_icon.svg" alt="Recycle Bin" /><span>Recycle Bin</span></div>
    </div>

    <!-- <div class="dialogue-box">
        <div class="dialogue-title-bar">
            <span>BitMedic to the Rescue!</span>
            <a href="#" class="dialogue-close-button" aria-label="Trigger BSOD">X</a>
        </div>
        <div class="dialogue-content">
            <div class="dialogue-icon">‚ö†Ô∏è</div>
            <div class="dialogue-text-area">
                <p class="dialogue-paragraph">Our dedicated experts are ready to tackle whatever's causing you grief, all remotely!<br/><br/>No need to let anyone into your home or haul your computer into some shop.<br/>You reach out, we connect, your computer runs better.<br/><br/><strong><em>Just like that.</em></strong></p>
                <div class="dialogue-button-container">
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSe87Vmx4OSsn1eQ8zh0XDLioe3Q-O6dLpIm2Ov_m60BSitE7A/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="get-help-button">Get Help!</a>
                </div>
            </div>
        </div>
    </div> -->

    <div id="bsod-screen" class="bsod-screen" style="display:none;">
      <div class="bsod-content-wrapper">
        <p class="bsod-title">A "Problem" Has Been Detected<br /> (and BitMedic is here for it!)</p>
        <p>Your PC hasn't actually crashed. This is a simulation!</p>
        <ul class="bsod-contact-info">
          <li>üìû Phone: (360) 975-4748</li>
          <li>‚åö Hours: 7am to 7pm PST <em>(with exceptions)</em></li>
          <li>üìß Email: support@bitmedic.io</li>
          <li>üåê Website: <a href="https://www.bitmedic.io/" target="_blank" rel="noopener noreferrer">https://bitmedic.io/</a></li>
        </ul>
        <p class="bsod-tech-info">*** STOP: 0x000SMILE (0xCHILLOUT, 0xWEGOTTHIS, 0xNOREALERROR, 0xCALLBITMEDIC)</p>
        <p class="bsod-restart-info">Press ESC or click anywhere on this blue screen to make it go away.</p>
      </div>
    </div>
  </main>

<style>
    /* All CSS styles from your last file remain the same */
    .desktop-area {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      align-items: center;
    }
    .desktop-icons-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
      width: 100%;
    }
    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 120px;
      text-align: center;
      text-decoration: none;
      cursor: pointer;
    }
    .desktop-icon img {
      width: 72px;
      height: 72px;
      margin-bottom: 8px;
    }
    .desktop-icon span {
      background-color: white;
      color: black;
      padding: 2px 5px;
      border-radius: 3px;
    }
    .desktop-icon:hover span {
      background-color: #0058a8;
      color: white;
    }

    .dialogue-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(320px, 90%, 740px);
      max-height: calc(100vh - var(--taskbar-height) - 40px);
      z-index: 9990;
      display: flex;
      flex-direction: column;
      border: 2px outset #C0C0C0;
      background-color: #F0F0F0;
      box-shadow: 5px 5px 10px rgba(0,0,0,0.3);
    }
    .dialogue-title-bar {
      background-color: #0058A8;
      color: white;
      padding: 5px 8px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }
    .dialogue-content {
      padding: 20px;
      display: flex;
      align-items: flex-start;
      overflow-y: auto;
    }
    .dialogue-icon {
      margin-right: 15px;
      font-size: 30px;
    }
    .dialogue-paragraph {
      font-size: 1.15rem;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    .dialogue-button-container {
      text-align: center;
    }
    .get-help-button {
      background-color: #E1E1E1;
      border: 1px outset #C0C0C0;
      padding: 8px 25px;
      font-size: 1.5rem;
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
    .get-help-button:active {
      border-style: inset;
    }
    .dialogue-close-button {
      background-color: #C0C0C0;
      border: 1px outset white;
      padding: 1px 5px;
      cursor: pointer;
      color: black;
      text-decoration: none;
    }
    .dialogue-close-button:hover {
      background-color: red;
      color: white;
      border-color: white;
    }

    /* BSOD STYLES */
    .bsod-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #0000AA; 
      color: #FFFFFF;
      font-family: 'Lucida Console', 'Courier New', monospace;
      padding: 2rem;
      z-index: 99999;
      cursor: pointer;
      overflow-y: auto;
      font-smooth: never;
      -webkit-font-smoothing: none;
    }
    .bsod-content-wrapper {
      max-width: none;
      margin: 0;
    }
    .bsod-title {
      background-color: #AAAAAA; 
      color: #0000AA; 
      padding: 0 0.5em;
      font-weight: normal;
      text-align: center;
      width: fit-content; 
      margin: 0 auto 2rem auto; 
    }
    .bsod-screen p {
      margin-bottom: 1.5em;
      line-height: 1.6;
    }
    .bsod-contact-info {
      list-style: none;
      padding-left: 1em;
    }
    .bsod-contact-info a,
    .bsod-contact-info a:visited {
      color: #FFFF80; 
      text-decoration: none;
    }
    .bsod-contact-info a:hover {
      color: #FFFFFF; 
    }
    .bsod-tech-info {
      margin-top: 2.5em;
      word-break: break-all;
    }
    .bsod-restart-info {
      margin-top: 3em;
      text-align: center;
    }
    .bsod-restart-info::after {
      content: '‚ñà';
      animation: blink 1s step-end infinite;
      margin-left: 0.5em;
    }
    @keyframes blink {
      50% {
        opacity: 0;
      }
    }
    
    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      .desktop-icons-container {
        justify-content: center;
      }
      .dialogue-box {
        width: 95%;
        max-height: calc(100vh - var(--taskbar-height) - 20px);
      }
    }
</style>

</Layout>

<script is:inline>
  function initializeBsodInteraction() {
    // UPDATED: Target the Recycle Bin icon by its new ID
    const bsodTrigger = document.getElementById('recycle-bin-icon');
    const bsodScreen = document.getElementById('bsod-screen');

    if (!bsodTrigger || !bsodScreen) {
      return; // Exit if elements aren't found
    }

    const attachEvents = () => {
      // UPDATED: Add the click listener to the Recycle Bin icon
      bsodTrigger.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent any default behavior if it were a link
        bsodScreen.style.display = 'block';
      });

      // This part remains the same: click BSOD to hide it
      bsodScreen.addEventListener('click', function() {
        bsodScreen.style.display = 'none';
      });
    
      // This part remains the same: press ESC to hide it
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && bsodScreen.style.display !== 'none') {
          bsodScreen.style.display = 'none';
        }
      });
    };

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', attachEvents);
    } else {
      attachEvents();
    }
  }

  initializeBsodInteraction();
</script>