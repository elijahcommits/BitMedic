---
import Layout from '../layouts/Layout.astro';
---
<Layout title="BitMedic Helps!">
  <main class="desktop-area">
    <div class="desktop-icons-container">
      <a href="/about/" class="desktop-icon"><img src="/icons/about_icon.svg" alt="About BitMedic" /><span>About</span></a>
      <a href="https://docs.google.com/forms/d/e/1FAIpQLSe87Vmx4OSsn1eQ8zh0XDLioe3Q-O6dLpIm2Ov_m60BSitE7A/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="desktop-icon"><img src="/icons/contact_icon.svg" alt="Contact BitMedic" /><span>Contact</span></a>
      <a href="/tech/" class="desktop-icon"><img src="/icons/tech_icon.svg" alt="Recommended Tech" /><span>Recommended<br />Tech</span></a>
      <a href="/merch/" class="desktop-icon"><img src="/icons/merch_icon.svg" alt="BitMedic Merch" /><span>Merch</span></a>
      <div class="desktop-icon"><img src="/icons/recycle_bin_icon.svg" alt="Recycle Bin" /><span>Recycle Bin</span></div>
    </div>

    <div class="dialogue-box">
        <div class="dialogue-title-bar">
            <span>BitMedic to the Rescue!</span>
            <a href="#" class="dialogue-close-button" aria-label="Trigger BSOD">X</a>
        </div>
        <div class="dialogue-content">
            <div class="dialogue-icon">‚ö†Ô∏è</div>
            <div class="dialogue-text-area">
                <p class="dialogue-paragraph">Our dedicated experts are ready to tackle whatever's causing you grief, all remotely!<br/><br/>No need to let anyone into your home or haul your computer into some shop.<br/>You reach out, we connect, your computer runs better.<br/><br/><strong><em>Just like that.</em></strong></p>
                <div class="dialogue-button-container">
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLSe87Vmx4OSsn1eQ8zh0XDLioe3Q-O6dLpIm2Ov_m60BSitE7A/viewform?usp=header" target="_blank" rel="noopener noreferrer" class="get-help-button">Get Help!</a>
                </div>
            </div>
        </div>
    </div>

    <div id="bsod-screen" class="bsod-screen" style="display:none;">
      <div class="bsod-content-wrapper">
        <p class="bsod-title">A "Problem" Has Been Detected<br /> (and BitMedic is here for it!)</p>
        <p>Your PC hasn't actually crashed. This is a simulation!</p>
        <ul class="bsod-contact-info">
          <li>üìû Phone: (555) BIT-MEDC</li>
          <li>üìß Email: help@bitmedic.online (Not real yet!)</li>
          <li>üåê Website: <a href="https://www.bitmedic.io/" target="_blank" rel="noopener noreferrer">https://bitmedic.io/</a></li>
        </ul>
        <p class="bsod-tech-info">*** STOP: 0x000SMILE (0xCHILLOUT, 0xWEGOTTHIS, 0xNOREALERROR, 0xCALLBITMEDIC)</p>
        <p class="bsod-restart-info">Click anywhere on this blue screen to make it go away.</p>
      </div>
    </div>
  </main>

<style>
    .desktop-area {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      align-items: center;
    }
    .desktop-icons-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
      width: 100%;
    }
    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 120px;
      text-align: center;
      text-decoration: none;
      cursor: pointer;
    }
    .desktop-icon img {
      width: 72px;
      height: 72px;
      margin-bottom: 8px;
    }
    .desktop-icon span {
      background-color: white;
      color: black;
      padding: 2px 5px;
      border-radius: 3px;
    }
    .desktop-icon:hover span {
      background-color: #0058a8;
      color: white;
    }

    .dialogue-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(320px, 90%, 740px);
      max-height: calc(100vh - var(--taskbar-height) - 40px);
      z-index: 9990;
      display: flex;
      flex-direction: column;
      border: 2px outset #C0C0C0;
      background-color: #F0F0F0;
      box-shadow: 5px 5px 10px rgba(0,0,0,0.3);
    }
    .dialogue-title-bar {
      background-color: #0058A8;
      color: white;
      padding: 5px 8px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }
    .dialogue-content {
      padding: 20px;
      display: flex;
      align-items: flex-start;
      overflow-y: auto;
    }
    .dialogue-icon {
      margin-right: 15px;
      font-size: 30px;
    }
    .dialogue-paragraph {
      font-size: 1.15rem;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    .dialogue-button-container {
      text-align: center;
    }
    .get-help-button {
      background-color: #E1E1E1;
      border: 1px outset #C0C0C0;
      padding: 8px 25px;
      font-size: 1.5rem;
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
    .get-help-button:active {
      border-style: inset;
    }
    .dialogue-close-button {
      background-color: #C0C0C0;
      border: 1px outset white;
      padding: 1px 5px;
      cursor: pointer;
      color: black;
      text-decoration: none;
    }
    .dialogue-close-button:hover {
      background-color: red;
      color: white;
      border-color: white;
    }

    /* --- NEW, MORE AUTHENTIC BSOD STYLES --- */
    .bsod-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #0000AA; /* Classic BSOD blue */
      color: #FFFFFF;
      font-family: 'Lucida Console', 'Courier New', monospace;
      padding: 2rem;
      z-index: 99999;
      cursor: pointer;
      overflow-y: auto;
      /* These properties enhance the sharp, retro CRT screen look */
      font-smooth: never;
      -webkit-font-smoothing: none;
    }
    .bsod-content-wrapper {
      max-width: none;
      margin: 0;
    }
    .bsod-title {
      background-color: #AAAAAA; /* Gray background for the title bar */
      color: #0000AA; /* Blue text on the gray background */
      padding: 0 0.5em;
      font-weight: normal;
      text-align: center;
      width: fit-content; /* Make the background only as wide as the text */
      margin: 0 auto 2rem auto; /* Center the title block */
    }
    .bsod-screen p {
      margin-bottom: 1.5em;
      line-height: 1.6;
    }
    .bsod-contact-info {
      list-style: none;
      padding-left: 1em;
    }
    .bsod-tech-info {
      margin-top: 2.5em;
      word-break: break-all;
    }
    .bsod-restart-info {
      margin-top: 3em;
      text-align: center;
    }
    /* This adds the classic blinking cursor at the end */
    .bsod-restart-info::after {
      content: '‚ñà';
      animation: blink 1s step-end infinite;
      margin-left: 0.5em;
    }
    @keyframes blink {
      50% {
        opacity: 0;
      }
    }
    
    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      .desktop-icons-container {
        justify-content: center;
      }
      .dialogue-box {
        width: 95%;
        max-height: calc(100vh - var(--taskbar-height) - 20px);
      }
    }
</style>

</Layout>

<script is:inline>
  // The is:inline directive tells Astro to skip processing this script
  // and inject it directly into the HTML. This is our final debugging step.
  function initializeBsodInteraction() {
    const closeButton = document.querySelector('.dialogue-box .dialogue-close-button');
    const bsodScreen = document.getElementById('bsod-screen');
    const dialogueBox = document.querySelector('.dialogue-box');

    if (!closeButton || !bsodScreen || !dialogueBox) {
      return; // Exit if elements aren't found
    }

    // Since this is now an inline script, it might run before the elements exist.
    // We must wrap the event listener attachment in a function and call it
    // when the document is ready.
    const attachEvents = () => {
      closeButton.addEventListener('click', function(event) {
        event.preventDefault();
        bsodScreen.style.display = 'block';
        dialogueBox.style.display = 'none';
      });

      bsodScreen.addEventListener('click', function() {
        bsodScreen.style.display = 'none';
        dialogueBox.style.display = 'flex';
      });
    
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && bsodScreen.style.display !== 'none') {
          bsodScreen.style.display = 'none';
          dialogueBox.style.display = 'flex';
        }
      });
    };

    // Use the standard 'DOMContentLoaded' event for inline scripts
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', attachEvents);
    } else {
      // The DOM is already ready
      attachEvents();
    }
  }

  // Run our main function
  initializeBsodInteraction();
</script>